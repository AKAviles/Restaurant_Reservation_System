(this["webpackJsonpstarter-restaurant-reservation-front-end"]=this["webpackJsonpstarter-restaurant-reservation-front-end"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),s=n.n(c),i=n(6),l=n(8),o=n(0);var b=function(){return Object(o.jsx)("nav",{className:"navbar navbar-dark align-items-start p-0",children:Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column p-0",children:[Object(o.jsx)(l.b,{className:"navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0",to:"/",children:Object(o.jsx)("div",{className:"sidebar-brand-text mx-3",children:Object(o.jsx)("span",{children:"Periodic Tables"})})}),Object(o.jsx)("hr",{className:"sidebar-divider my-0"}),Object(o.jsxs)("ul",{className:"nav navbar-nav text-light",id:"accordionSidebar",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/dashboard",children:[Object(o.jsx)("span",{className:"oi oi-dashboard"}),"\xa0Dashboard"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/search",children:[Object(o.jsx)("span",{className:"oi oi-magnifying-glass"}),"\xa0Search"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/reservations/new",children:[Object(o.jsx)("span",{className:"oi oi-plus"}),"\xa0New Reservation"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"nav-link",to:"/tables/new",children:[Object(o.jsx)("span",{className:"oi oi-layers"}),"\xa0New Table"]})})]}),Object(o.jsx)("div",{className:"text-center d-none d-md-inline",children:Object(o.jsx)("button",{className:"btn rounded-circle border-0",id:"sidebarToggle",type:"button"})})]})})},u=n(5),j=n(2),d=n.n(j),h=n(4),O=n(3),p=/\d\d\d\d-\d\d-\d\d/;function x(e){return"".concat(e.getFullYear().toString(10),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function v(){return x(new Date)}function m(e){return"".concat(e[5]).concat(e[6],"-").concat(e[8]).concat(e[9],"-").concat(e[0]).concat(e[1]).concat(e[2]).concat(e[3])}function f(e){return e.reservation_date=e.reservation_date.match(p)[0],e}function N(e){return Array.isArray(e)?e.map(f):f(e)}var g="http://localhost:5000",y=new Headers;function w(e,t,n){return _.apply(this,arguments)}function _(){return(_=Object(h.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,r.json();case 8:if(!(c=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:c.error}));case 11:return e.abrupt("return",c.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(a));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function k(e,t){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/reservations"),r={method:"POST",headers:y,body:JSON.stringify({data:t}),signal:n},e.next=4,w(a,r,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(h.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/tables"),r={method:"POST",headers:y,body:JSON.stringify({data:t}),signal:n},e.next=4,w(a,r,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(h.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/tables/").concat(t,"/seat"),r={method:"DELETE",headers:y,signal:n},e.next=4,w(a,r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return E.apply(this,arguments)}function E(){return(E=Object(h.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"/tables/").concat(n,"/seat"),r={method:"PUT",body:JSON.stringify({data:{reservation_id:t}}),headers:y},e.next=4,w(a,r,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(g,"/tables")),e.next=3,w(n,{headers:y,signal:t},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=Object(h.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations/").concat(t)),e.next=3,w(a,{headers:y,signal:n},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,n){return U.apply(this,arguments)}function U(){return(U=Object(h.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(g,"/reservations/").concat(n,"/status")),c={method:"PUT",headers:y,body:JSON.stringify({data:{status:t}}),signal:a},e.next=4,w(r,c,[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return q.apply(this,arguments)}function q(){return(q=Object(h.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations")),t&&(a="".concat(a,"?mobile_number=").concat(t)),e.next=4,w(a,{headers:y,signal:n},[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(h.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(g,"/reservations/").concat(n)),c={method:"PUT",headers:y,body:JSON.stringify({data:t}),signal:a},e.next=4,w(r,c,[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return H.apply(this,arguments)}function H(){return(H=Object(h.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations")),Object.entries(t).forEach((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return a.searchParams.append(n,r.toString())})),e.next=4,w(a,{headers:y,signal:n},[]).then(N).then(N);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y.append("Content-Type","application/json");var z=function(e){var t=e.error;return t&&Object(o.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};n(35);var W=function(e){var t=e.reservations,n=e.setCancelled,r=Object(a.useState)([]),c=Object(O.a)(r,2),s=c[0],l=c[1],b=Object(i.h)().pathname.includes("search");function u(e){var t=e.target;window.confirm("Do you want to cancel this reservation? This cannot be undone.")&&n((function(e){return t.dataset.reservationIdCancel}))}return Object(a.useEffect)((function(){l(function(e){return e.map((function(e){var t=e.status,n=e.reservation_id,a=e.reservation_time,r=e.reservation_date,c=e.first_name,s=e.last_name,i=e.people,l=e.created_at,j=e.mobile_number,d="booked"===t,h=Object(o.jsxs)("div",{className:"row justify-content-end",children:[Object(o.jsx)("div",{children:Object(o.jsx)("a",{className:"btn btn-outline-warning",href:"/reservations/".concat(n,"/edit"),role:"button",children:"edit"})}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn btn-outline-danger",onClick:u,"data-reservation-id-cancel":e.reservation_id,children:"cancel"})}),Object(o.jsx)("a",{href:"/reservations/".concat(n,"/seat"),role:"button",className:"btn btn-outline-primary",children:"seat"})]}),O=Object(o.jsxs)("div",{className:"card",style:{marginBottom:"5px"},children:[Object(o.jsxs)("div",{className:"row justify-content-between",children:[Object(o.jsxs)("h3",{children:[s,", ",c]}),Object(o.jsx)("div",{children:Object(o.jsx)("span",{className:"badge bg-primary","data-reservation-id-status":e.reservation_id,children:t})})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h5",{children:"Mobile Number"}),Object(o.jsx)("p",{children:j})]}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h5",{children:"Date and Time:"}),Object(o.jsxs)("p",{children:[r,", ",a]})]}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h5",{children:"Party Size:"}),Object(o.jsx)("p",{children:i})]})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"row align-items-end",children:[Object(o.jsxs)("p",{className:"col-5 ",style:{marginLeft:"20px"},children:["Created at: ",l]}),Object(o.jsxs)("p",{className:"col",children:["Reservation ID: ",n]})]}),Object(o.jsx)("div",{className:"col",children:d&&!b?h:null})]})]},n);return"cancelled"!==t?O:null}))}(t))}),[t]),s};n(36);var G=function(e){var t=e.date,n=new URLSearchParams(Object(i.h)().search).get("date");n&&(t=n);var r=Object(a.useState)([]),c=Object(O.a)(r,2),s=c[0],l=c[1],b=Object(a.useState)(null),j=Object(O.a)(b,2),p=j[0],x=j[1],v=Object(a.useState)({tableId:"",resId:""}),m=Object(O.a)(v,2),f=m[0],N=m[1],g=Object(a.useState)(""),y=Object(O.a)(g,2),w=y[0],_=y[1],k=Object(a.useState)([]),S=Object(O.a)(k,2),C=S[0],T=S[1],F=Object(a.useState)(null),E=Object(O.a)(F,2),R=E[0],A=E[1],I=Object(a.useState)(!1),U=Object(O.a)(I,2),M=U[0],q=U[1];function J(){return(J=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,L("cancelled",t,n.signal);case 3:return _((function(e){return""})),e.abrupt("return",(function(){return n.abort()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(h.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.prev=1,x(null),e.next=5,B({date:t},n.signal);case 5:(a=e.sent).filter((function(e){return"booked"===e.status||"seated"===e.status})),l(a.sort((function(e,t){return e.reservation_time>t.reservation_time}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),x(e.t0);case 13:return e.abrupt("return",(function(){return n.abort()}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function H(){return(H=Object(h.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!1),T((function(e){return[]})),A((function(e){return null})),t=f.tableId,n=new AbortController,e.prev=5,!t){e.next=16;break}return e.prev=7,e.next=10,D(t,n.signal);case 10:N(Object(u.a)(Object(u.a)({},f),{},{tableId:""})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),A(e.t0);case 16:return e.next=18,P(n.signal);case 18:a=e.sent,T((function(e){return a})),q(!0),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(5),A(e.t1);case 26:return e.abrupt("return",(function(){return n.abort()}));case 27:case"end":return e.stop()}}),e,null,[[5,23],[7,13]])})))).apply(this,arguments)}function G(e){var t=e.target;window.confirm("Is this table ready to seat new guests? This cannot be undone.")&&N({tableId:t.dataset.tableIdFinish,resId:t.dataset.reservationIdFinish})}Object(a.useEffect)((function(){!function(){H.apply(this,arguments)}(),w&&function(e){J.apply(this,arguments)}(w)}),[t,w,f]),Object(a.useEffect)((function(){M&&function(){Y.apply(this,arguments)}()}),[M]);var K=C.map((function(e){var t=e.reservation_id?"occupied":"free";return Object(o.jsx)("li",{className:"list-group-item ".concat(t),children:Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h4",{children:"Table Name"}),Object(o.jsx)("p",{children:e.table_name}),Object(o.jsx)("h4",{children:"Table Capacity"}),Object(o.jsx)("p",{children:e.capacity})]}),e.reservation_id?Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("span",{className:"badge bg-success","data-table-id-status":e.table_id,children:"occupied"}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{onClick:G,"data-table-id-finish":e.table_id,"data-reservation-id-finish":e.reservation_id,className:"btn btn-danger",children:"Finish"})]})}):Object(o.jsx)("div",{children:Object(o.jsx)("span",{"data-table-id-status":e.table_id,className:"badge bg-primary",children:"free"})})]})})},e.table_id)}));return Object(o.jsx)("main",{className:"container",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h1",{children:"Dashboard"}),Object(o.jsx)("div",{className:"d-md-flex mb-3",children:Object(o.jsxs)("h5",{className:"mb-0",children:["Reservations for date: ",t]})}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h2",{children:"Tables"}),Object(o.jsx)(z,{error:R}),Object(o.jsx)("ul",{className:"list-group",children:K})]}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("h2",{children:"Reservations"}),Object(o.jsx)(z,{error:p}),Object(o.jsx)("ul",{className:"list-group",children:Object(o.jsx)(W,{reservations:s,cancelled:w,setCancelled:_})})]})]})})})};var K=function(){return Object(o.jsx)("div",{className:"NotFound",children:Object(o.jsx)("h1",{children:"Not Found"})})},Q=n(13),V=v();var X=function(e){var t=e.initialFormData,n=Object(i.g)(),r=Object(i.h)().pathname,c=r.includes("edit"),s=r.includes("new"),l=Object(a.useState)(Object(u.a)({},t)),b=Object(O.a)(l,2),j=b[0],p=b[1],v=Object(a.useState)(""),f=Object(O.a)(v,2),N=f[0],g=f[1],y=Object(a.useState)(!1),w=Object(O.a)(y,2),_=w[0],S=w[1];function C(){g({message:"Please enter a valid time. (We reserve tables from 10:30AM to 9:30PM.)"})}function D(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.reservation_time,n=t.target;e=n?n.value:j.reservation_time,p((function(t){return Object(u.a)(Object(u.a)({},t),{},{reservation_time:e})}));var a=Number("".concat(e[3]).concat(e[4])),r=Number("".concat(e[0]).concat(e[1])),c=new Date(Date.now()),s=c.getHours(),i=c.getMinutes();r>=21&&a>30||r>21||r<=10&&a<30||r<10?C():(g(""),S(!1)),j.reservation_date===V&&(s<r?(g(""),S(!1)):s>r?C():i<a?(g(""),S(!1)):C())}function T(e){var t=e.target,n=t.name,a=t.value;p(Object(u.a)(Object(u.a)({},j),{},Object(Q.a)({},n,a)))}function F(){n.push("/dashboard?date=".concat(j.reservation_date))}Object(a.useEffect)((function(){var e=new Date(t.reservation_date);c&&p(Object(u.a)(Object(u.a)({},t),{},{reservation_date:x(e)}))}),[t]);var E=Object(a.useState)(""),P=Object(O.a)(E,2),R=P[0],A=P[1];function I(){return(I=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,L("cancelled",t,n.signal);case 3:return A((function(e){return""})),e.abrupt("return",(function(){return n.abort()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new AbortController,g(null),!c){e.next=14;break}return e.prev=3,e.next=6,J(Object(u.a)(Object(u.a)({},j),{},{people:Number(j.people)}),j.reservation_id,n.signal);case 6:F(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),g((function(t){return e.t0}));case 12:e.next=24;break;case 14:if(!s){e.next=24;break}return e.prev=15,e.next=18,k(Object(u.a)(Object(u.a)({},j),{},{people:Number(j.people)}),n.signal);case 18:F(),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(15),g((function(t){return e.t1}));case 24:return e.abrupt("return",(function(){return n.abort()}));case 25:case"end":return e.stop()}}),e,null,[[3,9],[15,21]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){R&&(!function(e){I.apply(this,arguments)}(R),F())}),[R]),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:_?Object(o.jsx)(z,{error:N}):null}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S(!0),N||function(e){U.apply(this,arguments)}(e)},children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("label",{htmlFor:"first_name",children:"First Name"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"text",onChange:T,name:"first_name",value:j.first_name,required:!0})]}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("label",{htmlFor:"last_name",children:"Last Name"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"text",onChange:T,name:"last_name",value:j.last_name,required:!0})]})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("label",{htmlFor:"mobile_number",children:"Mobile Number"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"text",onChange:T,name:"mobile_number",value:j.mobile_number,required:!0})]}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("label",{htmlFor:"people",children:"Party Size"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"text",onChange:T,name:"people",value:j.people,required:!0})]})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("label",{htmlFor:"reservation_date",children:"Date of Reservation"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"date",onChange:function(e){var t=e.target,n=new Date(m(t.value)),a=new Date(m(V)),r=2!==n.getDay(),c=n.getDate()>=a.getDate(),s=n.getMonth()>=a.getMonth(),i=n.getFullYear()>=a.getFullYear(),l=n.getFullYear()-a.getFullYear()>0;r&&c&&s&&i||l?(g(""),S(!1),p((function(e){return Object(u.a)(Object(u.a)({},e),{},{reservation_date:t.value})}))):(p((function(e){return Object(u.a)(Object(u.a)({},e),{},{reservation_date:t.value})})),g({message:"Please enter a valid date. (We are closed on tuesdays)"})),D()},name:"reservation_date",value:j.reservation_date,required:!0})]}),Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("label",{htmlFor:"reservation_time",children:"Time of Reservation"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"time",onChange:D,name:"reservation_time",value:j.reservation_time,required:!0})]})]}),Object(o.jsxs)("div",{style:{margin:"25px 0 0 0"},className:"row w-75 justify-content-center",children:[Object(o.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Submit"}),Object(o.jsx)("button",{onClick:function(){return n.push("/dashboard?date=".concat(j.reservation_date))},className:"btn btn-secondary",type:"cancel",children:"Cancel"}),c?Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("Do you want to cancel this reservation? This cannot be undone.")&&A((function(e){return j.reservation_id}))},className:"btn btn-danger",children:"Cancel Reservation"})}):null]})]})]})};var Z=function(){var e={first_name:"",last_name:"",mobile_number:"",reservation_date:v(),reservation_time:"",people:"",status:"booked"};return Object(o.jsx)("main",{className:"container",children:Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsxs)("div",{className:"col-8",children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"New reservation"})}),Object(o.jsx)(X,{initialFormData:e})]})})})};var $=function(){var e=Object(i.i)().reservation_id,t=Object(a.useState)({reservation_id:e}),n=Object(O.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){Promise.resolve(A(e).then(c))}),[e]),Object(o.jsx)("main",{className:"container",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col",children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Edit reservation:"})}),Object(o.jsx)(X,{initialFormData:r})]})})})};var ee=function(){var e=Object(i.i)().reservation_id,t=Object(i.g)(),n=Object(a.useState)([]),r=Object(O.a)(n,2),c=r[0],s=r[1],l=Object(a.useState)(null),b=Object(O.a)(l,2),u=b[0],j=b[1];Object(a.useEffect)((function(){var e=new AbortController;return j(null),P(e.signal).then(s).catch(j),function(){return e.abort()}}),[e]);var p=c.map((function(e){return e.reservation_id?null:Object(o.jsxs)("option",{value:e.table_id,name:e.table_name,cap:e.capacity,children:[e.table_name," - ",e.capacity]},e.table_id)}));Object(a.useEffect)((function(){!function(){D.apply(this,arguments)}()}),[]);var x=Object(a.useState)(""),v=Object(O.a)(x,2),m=v[0],f=v[1],N=Object(a.useState)(null),g=Object(O.a)(N,2),y=g[0],w=g[1],_=Object(a.useState)(""),k=Object(O.a)(_,2),S=k[0],C=k[1];function D(){return(D=Object(h.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new AbortController,t.prev=1,t.next=4,A(e,n.signal);case 4:a=t.sent,f(a),C((function(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("h4",{children:["The ",a.last_name," party"]}),Object(o.jsx)("h5",{children:"Reservation Holder:"})," ",Object(o.jsxs)("p",{children:[a.last_name,", ",a.first_name]}),Object(o.jsx)("h5",{children:"Phone Number"})," ",Object(o.jsx)("p",{children:a.mobile_number}),Object(o.jsx)("h5",{children:"Party of:"})," ",Object(o.jsxs)("p",{children:[a.people," people"]}),Object(o.jsx)("h5",{children:"Reservation Time"}),Object(o.jsx)("p",{children:a.reservation_time})]})})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),w(t.t0);case 12:return t.abrupt("return",(function(){return n.abort()}));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}var T=Object(a.useState)("select a table"),E=Object(O.a)(T,2),R=E[0],I=E[1],L=Object(a.useState)(""),U=Object(O.a)(L,2),M=U[0],q=U[1],J=Object(a.useState)(!0),Y=Object(O.a)(J,2),B=Y[0],H=Y[1],W=Object(a.useState)(!0),G=Object(O.a)(W,2),K=G[0],Q=G[1];function V(){return Number(M)>=Number(m.people)}function X(){return(X=Object(h.a)(d.a.mark((function n(a){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=new AbortController,a.preventDefault(),!V()){n.next=10;break}return H(!0),n.next=7,F(e,R,r.signal);case 7:t.push("/dashboard?date=".concat(m.reservation_date.substring(0,10))),n.next=11;break;case 10:H(!1);case 11:return n.abrupt("return",(function(){return r.abort()}));case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("div",{className:"row"}),Object(o.jsxs)("h4",{children:["Choose table to seat reservation #",e]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Reservation information:"}),Object(o.jsx)(z,{error:y}),S]}),Object(o.jsxs)("form",{onSubmit:function(e){return X.apply(this,arguments)},children:[Object(o.jsxs)("label",{children:[Object(o.jsx)("h5",{children:"Available tables:"}),Object(o.jsx)(z,{error:u}),Object(o.jsxs)("select",{name:"table_id",onChange:function(e){Q(!1);for(var t=0;e.target[t];){if(e.target[t].getAttribute("value")===e.target.value){var n=e.target[t].getAttribute("cap");q(n)}I(e.target.value),t++}},children:[K?Object(o.jsx)("option",{children:"select a table"}):null,p]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Seat Table"}),Object(o.jsx)("button",{type:"reset",onClick:function(){t.push("/dashboard?date=".concat(m.reservation_date.substring(0,10)))},className:"btn btn-warning",children:"Cancel"}),Object(o.jsx)("div",{children:B?null:Object(o.jsx)("p",{className:"alert alert-danger",children:"Please make a new table selection. (Capacity may be too small for reservation.)"})})]})]})]})};var te=function(){var e="Enter a customer's phone number",t=Object(a.useState)([]),n=Object(O.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(e),i=Object(O.a)(s,2),l=i[0],b=i[1],u=Object(a.useState)(""),j=Object(O.a)(u,2),p=j[0],x=j[1],v=Object(a.useState)(!0),m=Object(O.a)(v,2),f=m[0],N=m[1],g=Object(a.useState)(!0),y=Object(O.a)(g,2),w=y[0],_=y[1],k=Object(a.useState)(0),S=Object(O.a)(k,2),C=S[0],D=S[1];function T(){return(T=Object(h.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!l){t.next=10;break}return t.next=4,M(l);case 4:n=t.sent,c(n),_(!1),l&&!r.length&&l!==e&&_(!0),t.next=11;break;case 10:_(!0);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),x(t.t0),_(!0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function F(e){e?(N(!1),b(e)):(N(!0),b(e))}Object(a.useEffect)((function(){!function(){T.apply(this,arguments)}()}),[l,C]);var E=Object(o.jsx)("div",{children:Object(o.jsx)("h5",{children:"No reservations found"})}),P=Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsx)("h4",{children:"Enter a mobile number to search reservations."})});return Object(o.jsxs)("div",{style:{margin:"30px 0 30px 30px"},children:[Object(o.jsx)("div",{children:Object(o.jsxs)("form",{onSubmit:function(e){e&&e.preventDefault(),F(l)},children:[Object(o.jsx)(z,{error:p}),Object(o.jsxs)("div",{className:"row align-items-end",children:[Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("label",{className:"w-100",children:[Object(o.jsx)("h5",{children:"Search by mobile number:"}),Object(o.jsx)("input",{className:"w-75 p-1",type:"search",value:l,onClick:function(){l===e&&b("")},onChange:function(e){var t=e.target.value;" "===t&&""===t||F(t)},name:"mobile_number"})]})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)("button",{type:"submit",role:"button",onClick:function(){D(C+1)},className:"btn btn-primary",children:"Find"})})]})]})}),Object(o.jsx)("div",{className:"col p-5",children:f?P:Object(o.jsx)(W,{reservations:r})}),Object(o.jsx)("div",{className:"col",children:w?E:null})]})};var ne=function(){var e={table_name:"",capacity:""},t=Object(a.useState)(Object(u.a)({},e)),n=Object(O.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),l=Object(O.a)(s,2),b=l[0],j=l[1],d=Object(i.g)();function h(e){var t=e.target,n=t.name,a=t.value;c(Object(u.a)(Object(u.a)({},r),{},Object(Q.a)({},n,a))),r.table_name.length>=1&&j(null)}return Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{style:{margin:"20px 0 0 30px"},children:[Object(o.jsx)("h1",{children:"New Table"}),Object(o.jsx)(z,{error:b}),Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r.table_name.length<=1?j({message:"Table needs a name with more than one character"}):(j(null),function(e,t){return C.apply(this,arguments)}(r).then(c(Object(u.a)({},e))).then(d.push("/dashboard")).catch(j))},children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("label",{children:[Object(o.jsx)("h5",{children:"Name"}),Object(o.jsx)("input",{onChange:h,name:"table_name",type:"text",value:r.table_name,required:!0})]})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("label",{children:[Object(o.jsx)("h5",{children:"Capacity"}),Object(o.jsx)("input",{onChange:h,name:"capacity",type:"text",value:r.capacity,required:!0})]})})]}),Object(o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(o.jsx)("button",{type:"cancel",className:"btn btn-warning",onClick:function(e){e.preventDefault(),d.goBack()},children:"Cancel"})]})})]})})};var ae=function(){return Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{exact:!0,path:"/",children:Object(o.jsx)(i.a,{to:"/dashboard"})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations",children:Object(o.jsx)(i.a,{to:"/dashboard"})}),Object(o.jsx)(i.b,{path:"/dashboard",children:Object(o.jsx)(G,{date:v()})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/new",children:Object(o.jsx)(Z,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/edit",children:Object(o.jsx)($,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/seat",children:Object(o.jsx)(ee,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/search",children:Object(o.jsx)(te,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/tables/new",children:Object(o.jsx)(ne,{})}),Object(o.jsx)(i.b,{children:Object(o.jsx)(K,{})})]})};n(37);var re=function(){return Object(o.jsx)("div",{className:"container-fluid",children:Object(o.jsxs)("div",{className:"row h-100",children:[Object(o.jsx)("div",{className:"col-md-2 side-bar",children:Object(o.jsx)(b,{})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)(ae,{})})]})})};var ce=function(){return Object(o.jsx)(i.d,{children:Object(o.jsx)(i.b,{path:"/",children:Object(o.jsx)(re,{})})})};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(l.a,{children:Object(o.jsx)(ce,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.73bd8130.chunk.js.map